package org.cuatrovientos.dam.psp.tamagotchis;
import java.util.Scanner;

public class Main {
    public static void main(String[] args) {
        Scanner scanner = new Scanner(System.in);
        Cuidador cuidador = new Cuidador();
        
        // Crear algunos tamagotchis por defecto
        cuidador.agregarTamagotchi("Tama1");
        cuidador.agregarTamagotchi("Tama2");
        cuidador.agregarTamagotchi("Tama3");
        
        // Iniciar todos los tamagotchis
        cuidador.iniciarTodos();
        System.out.println("üê£ ¬°Tamagotchis iniciados!");
        
        boolean salir = false;
        
        while (!salir) {
            mostrarMenu();
            int opcion = leerOpcion(scanner);
            
            switch (opcion) {
                case 1:
                    cuidador.mostrarEstados();
                    break;
                case 2:
                    alimentarTamagotchi(scanner, cuidador);
                    break;
                case 3:
                    jugarConTamagotchi(scanner, cuidador);
                    break;
                case 4:
                    limpiarTamagotchi(scanner, cuidador);
                    break;
                case 5:
                    matarTamagotchi(scanner, cuidador);
                    break;
                case 6:
                    System.out.println("üëã ¬°Hasta luego!");
                    salir = true;
                    // Matar todos los tamagotchis antes de salir
                    for (int i = 0; i < cuidador.getCantidad(); i++) {
                        if (cuidador.getTamagotchi(i).isVivo()) {
                            cuidador.getTamagotchi(i).morir();
                        }
                    }
                    break;
                default:
                    System.out.println("‚ùå Opci√≥n inv√°lida");
            }
            
            System.out.println(); // l√≠nea en blanco para separar
        }
        
        scanner.close();
    }
    
    private static void mostrarMenu() {
        System.out.println("=== üê£ MEN√ö CUIDADOR ===");
        System.out.println("1. üìä Ver estados");
        System.out.println("2. üçé Alimentar");
        System.out.println("3. üéÆ Jugar");
        System.out.println("4. üöø Limpiar");
        System.out.println("5. üíÄ Matar");
        System.out.println("6. üö™ Salir");
        System.out.print("Elige una opci√≥n: ");
    }
    
    private static int leerOpcion(Scanner scanner) {
        try {
            return scanner.nextInt();
        } catch (Exception e) {
            scanner.next(); // limpiar buffer
            return -1;
        }
    }
    
    private static void alimentarTamagotchi(Scanner scanner, Cuidador cuidador) {
        if (cuidador.getCantidad() == 0) {
            System.out.println("‚ùå No hay tamagotchis");
            return;
        }
        
        cuidador.mostrarEstados();
        System.out.print("¬øCu√°l quieres alimentar? (0-" + (cuidador.getCantidad()-1) + "): ");
        
        try {
            int indice = scanner.nextInt();
            cuidador.alimentarTamagotchi(indice);
        } catch (Exception e) {
            System.out.println("‚ùå √çndice inv√°lido");
            scanner.next();
        }
    }
    
    private static void jugarConTamagotchi(Scanner scanner, Cuidador cuidador) {
        if (cuidador.getCantidad() == 0) {
            System.out.println("‚ùå No hay tamagotchis");
            return;
        }
        
        cuidador.mostrarEstados();
        System.out.print("¬øCon cu√°l quieres jugar? (0-" + (cuidador.getCantidad()-1) + "): ");
        
        try {
            int indice = scanner.nextInt();
            cuidador.jugarConTamagotchi(indice);
        } catch (Exception e) {
            System.out.println("‚ùå √çndice inv√°lido");
            scanner.next();
        }
    }
    
    private static void limpiarTamagotchi(Scanner scanner, Cuidador cuidador) {
        if (cuidador.getCantidad() == 0) {
            System.out.println("‚ùå No hay tamagotchis");
            return;
        }
        
        cuidador.mostrarEstados();
        System.out.print("¬øA cu√°l quieres limpiar? (0-" + (cuidador.getCantidad()-1) + "): ");
        
        try {
            int indice = scanner.nextInt();
            cuidador.limpiarTamagotchi(indice);
        } catch (Exception e) {
            System.out.println("‚ùå √çndice inv√°lido");
            scanner.next();
        }
    }
    
    private static void matarTamagotchi(Scanner scanner, Cuidador cuidador) {
        if (cuidador.getCantidad() == 0) {
            System.out.println("‚ùå No hay tamagotchis");
            return;
        }
        
        cuidador.mostrarEstados();
        System.out.print("¬øA cu√°l quieres matar? (0-" + (cuidador.getCantidad()-1) + "): ");
        
        try {
            int indice = scanner.nextInt();
            cuidador.matarTamagotchi(indice);
        } catch (Exception e) {
            System.out.println("‚ùå √çndice inv√°lido");
            scanner.next();
        }
    }
}
